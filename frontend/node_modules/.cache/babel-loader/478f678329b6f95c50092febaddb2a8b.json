{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SMASH-PC\\\\Desktop\\\\furniturebidding\\\\frontend\\\\src\\\\app\\\\views\\\\seller\\\\components\\\\CreateInvoice.js\";\nimport React, { useEffect, useState, Fragment } from \"react\";\nimport { Button, Form, FormControl } from \"react-bootstrap\";\nimport DatePicker from \"react-datepicker\";\nimport { Breadcrumb } from \"@gull\";\nimport { useAuth } from \"app/appContext\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { nanoid } from \"nanoid\";\nimport { addOrder } from \"app/reducers/actions/FurnitureActions\";\n\nconst CreateInvoice = () => {\n  const {\n    products,\n    users,\n    biddings,\n    dispatch\n  } = useAuth();\n  const {\n    id\n  } = useParams();\n  const product = products.find(product => product.id === id);\n  const filteredBiddings = biddings.filter(bidding => bidding.productId === id);\n  const findWinner = filteredBiddings.length !== 0 && filteredBiddings.reduce((acc, current) => {\n    if (current.bidAmount > acc.bidAmount) {\n      return current;\n    } else {\n      return acc;\n    }\n  });\n  const bidAmount = findWinner.bidAmount;\n  const [loading, setLoading] = useState();\n  const [vat, setVat] = useState();\n  const [totalAmount, setTotalAmount] = useState();\n\n  const handleSubmit = async () => {\n    const order = {\n      id: nanoid(),\n      productId: id,\n      userId: findWinner.userId,\n      isPaid: false,\n      created: Date.now()\n    };\n    setLoading(true);\n    await addOrder(order)(dispatch);\n    setLoading(false);\n  };\n\n  const handleChange = e => {\n    setVat(e.target.value);\n  };\n\n  const calculate = (vat, total) => {\n    const VAT = total * (vat / 100);\n    const amount = total + VAT;\n    setTotalAmount(amount);\n  }; // const totalAmount = bidAmount + bidAmount * (vat / 100);\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb, {\n    routeSegments: [{\n      name: \"Create Invoice\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }), findWinner && product ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invoice-viewer py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    className: \"px-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"viewer_actions d-flex justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/seller/my-products\",\n    className: \"mr-3 py-2\",\n    variant: \"warning\" // onClick={() => this.props.toggleInvoiceEditor()}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleSubmit,\n    type: \"button\",\n    className: \"py-2\",\n    variant: \"primary\",\n    disabled: !vat && !totalAmount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }\n  }, \"Add\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3 mb-4 border-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 19\n    }\n  }, \"Bill From\"), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 19\n    }\n  }, users.find(user => user.uid === product.userId) ? users.find(user => user.uid === product.userId).displayName ? users.find(user => user.uid === product.userId).displayName : users.find(user => user.uid === product.userId).email : \"No user found\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 19\n    }\n  }, \"Bill To\"), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, users.find(user => user.uid === findWinner.userId) ? users.find(user => user.uid === findWinner.userId).displayName ? users.find(user => user.uid === findWinner.userId).displayName : users.find(user => user.uid === findWinner.userId).email : \"No user found or No bids in this product\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12 table-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-hover mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"bg-gray-300\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, \"Product Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, \"Product Image\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, \"Price\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, product.productName), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: product.productImages[0],\n    style: {\n      width: \"100px\",\n      height: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 27\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, findWinner.bidAmount))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invoice-summary invoice-summary-input float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }, \"Vat(%):\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    type: \"text\",\n    className: \"small-input\",\n    name: \"vat\",\n    value: vat,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => calculate(Number(vat), Number(bidAmount)),\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 23\n    }\n  }, \"calculate\")), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"font-weight-bold d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }, \"Grand Total:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 23\n    }\n  }, \" \\u20B1 \", totalAmount)))))))) : \"No bid winner in this product\");\n};\n\nexport default CreateInvoice;","map":{"version":3,"sources":["C:/Users/SMASH-PC/Desktop/furniturebidding/frontend/src/app/views/seller/components/CreateInvoice.js"],"names":["React","useEffect","useState","Fragment","Button","Form","FormControl","DatePicker","Breadcrumb","useAuth","Link","useParams","nanoid","addOrder","CreateInvoice","products","users","biddings","dispatch","id","product","find","filteredBiddings","filter","bidding","productId","findWinner","length","reduce","acc","current","bidAmount","loading","setLoading","vat","setVat","totalAmount","setTotalAmount","handleSubmit","order","userId","isPaid","created","Date","now","handleChange","e","target","value","calculate","total","VAT","amount","name","user","uid","displayName","email","productName","productImages","width","height","Number"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Fragment } from \"react\";\r\nimport { Button, Form, FormControl } from \"react-bootstrap\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport { Breadcrumb } from \"@gull\";\r\nimport { useAuth } from \"app/appContext\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { addOrder } from \"app/reducers/actions/FurnitureActions\";\r\n\r\nconst CreateInvoice = () => {\r\n  const { products, users, biddings, dispatch } = useAuth();\r\n\r\n  const { id } = useParams();\r\n  const product = products.find((product) => product.id === id);\r\n  const filteredBiddings = biddings.filter(\r\n    (bidding) => bidding.productId === id\r\n  );\r\n  const findWinner =\r\n    filteredBiddings.length !== 0 &&\r\n    filteredBiddings.reduce((acc, current) => {\r\n      if (current.bidAmount > acc.bidAmount) {\r\n        return current;\r\n      } else {\r\n        return acc;\r\n      }\r\n    });\r\n  const bidAmount = findWinner.bidAmount;\r\n  const [loading, setLoading] = useState();\r\n  const [vat, setVat] = useState();\r\n  const [totalAmount, setTotalAmount] = useState();\r\n  const handleSubmit = async () => {\r\n    const order = {\r\n      id: nanoid(),\r\n      productId: id,\r\n      userId: findWinner.userId,\r\n      isPaid: false,\r\n      created: Date.now(),\r\n    };\r\n    setLoading(true);\r\n    await addOrder(order)(dispatch);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setVat(e.target.value);\r\n  };\r\n  const calculate = (vat, total) => {\r\n    const VAT = total * (vat / 100);\r\n    const amount = total + VAT;\r\n    setTotalAmount(amount);\r\n  };\r\n\r\n  // const totalAmount = bidAmount + bidAmount * (vat / 100);\r\n  return (\r\n    <div>\r\n      <Breadcrumb routeSegments={[{ name: \"Create Invoice\" }]}></Breadcrumb>\r\n\r\n      {findWinner && product ? (\r\n        <div className=\"invoice-viewer py-3\">\r\n          <Fragment>\r\n            <Form className=\"px-3\">\r\n              <div className=\"viewer_actions d-flex justify-content-end\">\r\n                <div className=\"mb-4\">\r\n                  <Link\r\n                    to=\"/seller/my-products\"\r\n                    className=\"mr-3 py-2\"\r\n                    variant=\"warning\"\r\n                    // onClick={() => this.props.toggleInvoiceEditor()}\r\n                  >\r\n                    Cancel\r\n                  </Link>\r\n                  <Button\r\n                    onClick={handleSubmit}\r\n                    type=\"button\"\r\n                    className=\"py-2\"\r\n                    variant=\"primary\"\r\n                    disabled={!vat && !totalAmount}\r\n                  >\r\n                    Add\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-3 mb-4 border-top\"></div>\r\n              <div className=\"row mb-5\">\r\n                <div className=\"col-md-6\">\r\n                  <h5 className=\"font-weight-bold\">Bill From</h5>\r\n                  <h5>\r\n                    {users.find((user) => user.uid === product.userId)\r\n                      ? users.find((user) => user.uid === product.userId)\r\n                          .displayName\r\n                        ? users.find((user) => user.uid === product.userId)\r\n                            .displayName\r\n                        : users.find((user) => user.uid === product.userId)\r\n                            .email\r\n                      : \"No user found\"}\r\n                  </h5>\r\n                </div>\r\n\r\n                <div className=\"col-md-6 text-right\">\r\n                  <h5 className=\"font-weight-bold\">Bill To</h5>\r\n                  <h5>\r\n                    {users.find((user) => user.uid === findWinner.userId)\r\n                      ? users.find((user) => user.uid === findWinner.userId)\r\n                          .displayName\r\n                        ? users.find((user) => user.uid === findWinner.userId)\r\n                            .displayName\r\n                        : users.find((user) => user.uid === findWinner.userId)\r\n                            .email\r\n                      : \"No user found or No bids in this product\"}\r\n                  </h5>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12 table-responsive\">\r\n                  <table className=\"table table-hover mb-3\">\r\n                    <thead className=\"bg-gray-300\">\r\n                      <tr>\r\n                        <th scope=\"col\">Product Name</th>\r\n                        <th scope=\"col\">Product Image</th>\r\n                        <th scope=\"col\">Price</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr>\r\n                        <td>{product.productName}</td>\r\n                        <td className=\"text-middle\">\r\n                          <img\r\n                            src={product.productImages[0]}\r\n                            style={{ width: \"100px\", height: \"100px\" }}\r\n                          />\r\n                        </td>\r\n                        <td>{findWinner.bidAmount}</td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                  <div className=\"invoice-summary invoice-summary-input float-right\">\r\n                    <p className=\"d-flex align-items-center\">\r\n                      Vat(%):\r\n                      <span>\r\n                        <FormControl\r\n                          type=\"text\"\r\n                          className=\"small-input\"\r\n                          name=\"vat\"\r\n                          value={vat}\r\n                          onChange={handleChange}\r\n                        />\r\n                      </span>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() =>\r\n                          calculate(Number(vat), Number(bidAmount))\r\n                        }\r\n                        className=\"btn btn-primary\"\r\n                      >\r\n                        calculate\r\n                      </button>\r\n                    </p>\r\n                    <h5 className=\"font-weight-bold d-flex align-items-center\">\r\n                      Grand Total:\r\n                      <span> &#8369; {totalAmount}</span>\r\n                    </h5>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Form>\r\n          </Fragment>\r\n        </div>\r\n      ) : (\r\n        \"No bid winner in this product\"\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateInvoice;\r\n"]},"metadata":{},"sourceType":"module"}