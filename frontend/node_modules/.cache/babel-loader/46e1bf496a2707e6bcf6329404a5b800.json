{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\SMASH-PC\\\\Desktop\\\\furniturebidding\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext,useReducer}from\"react\";import routes from\"./RootRoutes\";import\"firebase/auth\";import{auth}from\"./services/firebase/firebaseAuthService\";import{login,logout,signup,resetPassword,loginWithFacebook,loginWithGoogle}from\"./services/AuthService\";import{getItem,setItem}from\"./services/localStorageService\";import FurnitureReducer from\"./reducers/reducers/FurnitureReducer\";import{initialState}from\"./reducers/reducers/FurnitureReducer\";import{getBiddings,getOrders,getProducts,getUsers}from\"./reducers/actions/FurnitureActions\";var AppContext=React.createContext({});export function useAuth(){return useContext(AppContext);}export function AppProvider(_ref){var children=_ref.children;var _useState=useState(null||getItem(\"user\")),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useReducer=useReducer(FurnitureReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){getProducts()(dispatch);getBiddings()(dispatch);getUsers()(dispatch);getOrders()(dispatch);},[]);useEffect(function(){var unsubscribe=auth.onAuthStateChanged(function(user){setItem(\"user\",user);setUser(user);setLoading(false);});return function(){return unsubscribe;};});console.log(state);var value={products:state.products,biddings:state.biddings,users:state.users,orders:state.orders,dispatch:dispatch,user:user,resetPassword:resetPassword,setUser:setUser,routes:routes,signup:signup,login:login,logout:logout,loginWithGoogle:loginWithGoogle,loginWithFacebook:loginWithFacebook};return/*#__PURE__*/React.createElement(AppContext.Provider,{value:value},!loading&&children);}export default AppContext;","map":{"version":3,"sources":["C:/Users/SMASH-PC/Desktop/furniturebidding/frontend/src/app/appContext.js"],"names":["React","useState","useEffect","useContext","useReducer","routes","auth","login","logout","signup","resetPassword","loginWithFacebook","loginWithGoogle","getItem","setItem","FurnitureReducer","initialState","getBiddings","getOrders","getProducts","getUsers","AppContext","createContext","useAuth","AppProvider","children","user","setUser","loading","setLoading","state","dispatch","unsubscribe","onAuthStateChanged","console","log","value","products","biddings","users","orders"],"mappings":"oLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,CAAiDC,UAAjD,KAAmE,OAAnE,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAO,eAAP,CACA,OAASC,IAAT,KAAqB,yCAArB,CACA,OACEC,KADF,CAEEC,MAFF,CAGEC,MAHF,CAIEC,aAJF,CAKEC,iBALF,CAMEC,eANF,KAOO,wBAPP,CAQA,OAASC,OAAT,CAAkBC,OAAlB,KAAiC,gCAAjC,CACA,MAAOC,CAAAA,gBAAP,KAA6B,sCAA7B,CACA,OAASC,YAAT,KAA6B,sCAA7B,CACA,OACEC,WADF,CAEEC,SAFF,CAGEC,WAHF,CAIEC,QAJF,KAKO,qCALP,CAMA,GAAMC,CAAAA,UAAU,CAAGrB,KAAK,CAACsB,aAAN,CAAoB,EAApB,CAAnB,CACA,MAAO,SAASC,CAAAA,OAAT,EAAmB,CACxB,MAAOpB,CAAAA,UAAU,CAACkB,UAAD,CAAjB,CACD,CACD,MAAO,SAASG,CAAAA,WAAT,MAAmC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,eAChBxB,QAAQ,CAAC,MAAQY,OAAO,CAAC,MAAD,CAAhB,CADQ,wCACjCa,IADiC,eAC3BC,OAD2B,8BAEV1B,QAAQ,CAAC,IAAD,CAFE,yCAEjC2B,OAFiC,eAExBC,UAFwB,+BAGdzB,UAAU,CAACW,gBAAD,CAAmBC,YAAnB,CAHI,4CAGjCc,KAHiC,iBAG1BC,QAH0B,iBAKxC7B,SAAS,CAAC,UAAM,CACdiB,WAAW,GAAGY,QAAH,CAAX,CACAd,WAAW,GAAGc,QAAH,CAAX,CACAX,QAAQ,GAAGW,QAAH,CAAR,CACAb,SAAS,GAAGa,QAAH,CAAT,CACD,CALQ,CAKN,EALM,CAAT,CAMA7B,SAAS,CAAC,UAAM,CACd,GAAM8B,CAAAA,WAAW,CAAG1B,IAAI,CAAC2B,kBAAL,CAAwB,SAACP,IAAD,CAAU,CACpDZ,OAAO,CAAC,MAAD,CAASY,IAAT,CAAP,CACAC,OAAO,CAACD,IAAD,CAAP,CACAG,UAAU,CAAC,KAAD,CAAV,CACD,CAJmB,CAApB,CAKA,MAAO,kBAAMG,CAAAA,WAAN,EAAP,CACD,CAPQ,CAAT,CAQAE,OAAO,CAACC,GAAR,CAAYL,KAAZ,EACA,GAAMM,CAAAA,KAAK,CAAG,CACZC,QAAQ,CAAEP,KAAK,CAACO,QADJ,CAEZC,QAAQ,CAAER,KAAK,CAACQ,QAFJ,CAGZC,KAAK,CAAET,KAAK,CAACS,KAHD,CAIZC,MAAM,CAAEV,KAAK,CAACU,MAJF,CAKZT,QAAQ,CAARA,QALY,CAMZL,IAAI,CAAJA,IANY,CAOZhB,aAAa,CAAbA,aAPY,CAQZiB,OAAO,CAAPA,OARY,CASZtB,MAAM,CAANA,MATY,CAUZI,MAAM,CAANA,MAVY,CAWZF,KAAK,CAALA,KAXY,CAYZC,MAAM,CAANA,MAZY,CAaZI,eAAe,CAAfA,eAbY,CAcZD,iBAAiB,CAAjBA,iBAdY,CAAd,CAgBA,mBACE,oBAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,CAAEyB,KAA5B,EACG,CAACR,OAAD,EAAYH,QADf,CADF,CAKD,CAED,cAAeJ,CAAAA,UAAf","sourcesContent":["import React, { useState, useEffect, useContext, useReducer } from \"react\";\nimport routes from \"./RootRoutes\";\nimport \"firebase/auth\";\nimport { auth } from \"./services/firebase/firebaseAuthService\";\nimport {\n  login,\n  logout,\n  signup,\n  resetPassword,\n  loginWithFacebook,\n  loginWithGoogle,\n} from \"./services/AuthService\";\nimport { getItem, setItem } from \"./services/localStorageService\";\nimport FurnitureReducer from \"./reducers/reducers/FurnitureReducer\";\nimport { initialState } from \"./reducers/reducers/FurnitureReducer\";\nimport {\n  getBiddings,\n  getOrders,\n  getProducts,\n  getUsers,\n} from \"./reducers/actions/FurnitureActions\";\nconst AppContext = React.createContext({});\nexport function useAuth() {\n  return useContext(AppContext);\n}\nexport function AppProvider({ children }) {\n  const [user, setUser] = useState(null || getItem(\"user\"));\n  const [loading, setLoading] = useState(true);\n  const [state, dispatch] = useReducer(FurnitureReducer, initialState);\n\n  useEffect(() => {\n    getProducts()(dispatch);\n    getBiddings()(dispatch);\n    getUsers()(dispatch);\n    getOrders()(dispatch);\n  }, []);\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((user) => {\n      setItem(\"user\", user);\n      setUser(user);\n      setLoading(false);\n    });\n    return () => unsubscribe;\n  });\n  console.log(state);\n  const value = {\n    products: state.products,\n    biddings: state.biddings,\n    users: state.users,\n    orders: state.orders,\n    dispatch,\n    user,\n    resetPassword,\n    setUser,\n    routes,\n    signup,\n    login,\n    logout,\n    loginWithGoogle,\n    loginWithFacebook,\n  };\n  return (\n    <AppContext.Provider value={value}>\n      {!loading && children}\n    </AppContext.Provider>\n  );\n}\n\nexport default AppContext;\n"]},"metadata":{},"sourceType":"module"}