{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\SMASH-PC\\\\Desktop\\\\furniturebidding\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\SMASH-PC\\\\Desktop\\\\furniturebidding\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\SMASH-PC\\\\Desktop\\\\furniturebidding\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Col,Row,Tab,Tabs}from\"react-bootstrap\";import{SimpleCard}from\"@gull\";import{useAuth}from\"app/appContext\";import{loadStripe}from\"@stripe/stripe-js\";import Payment from\"./Payment\";var WonBids=function WonBids(_ref){var userId=_ref.userId,orders=_ref.orders,products=_ref.products;var filterOrders=orders.filter(function(order){return order.userId===userId;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),stripePromise=_useState2[0],setStripePromise=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),clientSecret=_useState4[0],setClientSecret=_useState4[1];useEffect(function(){fetch(\"http://127.0.0.1:5001/furniturebidding-9a01b/us-central1/app/config\").then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(r){var _yield$r$json,publishableKey;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return r.json();case 2:_yield$r$json=_context.sent;publishableKey=_yield$r$json.publishableKey;setStripePromise(loadStripe(publishableKey));case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());},[]);console.log(stripePromise);console.log(clientSecret);useEffect(function(){fetch(\"http://127.0.0.1:5001/furniturebidding-9a01b/us-central1/app/create-payment-intent\",{method:\"POST\",body:JSON.stringify({})}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(result){var _yield$result$json,clientSecret;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return result.json();case 2:_yield$result$json=_context2.sent;clientSecret=_yield$result$json.clientSecret;setClientSecret(clientSecret);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}());},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},/*#__PURE__*/React.createElement(Row,null,filterOrders.map(function(order){return/*#__PURE__*/React.createElement(Col,{lg:12,md:12,sm:12,xs:12},/*#__PURE__*/React.createElement(SimpleCard,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-row align-items-center\"},products.find(function(product){return product.id===order.productId;})&&/*#__PURE__*/React.createElement(\"img\",{src:products.find(function(product){return product.id===order.productId;}).productImages[0],style:{width:\"100px\",height:\"100px\"}}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column ml-5\"},/*#__PURE__*/React.createElement(\"h3\",null,products.find(function(product){return product.id===order.productId;})&&products.find(function(product){return product.id===order.productId;}).productName),/*#__PURE__*/React.createElement(\"p\",null,\"Amount to pay: \\u20B1\",order.amountToPay),order.isPaid?\"Paid\":/*#__PURE__*/React.createElement(Payment,{stripePromise:stripePromise,clientSecret:clientSecret,orderId:order.id})))));})));};export default WonBids;","map":{"version":3,"sources":["C:/Users/SMASH-PC/Desktop/furniturebidding/frontend/src/app/views/account/components/WonBids.js"],"names":["React","useEffect","useState","Col","Row","Tab","Tabs","SimpleCard","useAuth","loadStripe","Payment","WonBids","userId","orders","products","filterOrders","filter","order","stripePromise","setStripePromise","clientSecret","setClientSecret","fetch","then","r","json","publishableKey","console","log","method","body","JSON","stringify","result","map","find","product","id","productId","productImages","width","height","productName","amountToPay","isPaid"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Col, Row, Tab, Tabs } from \"react-bootstrap\";\r\nimport { SimpleCard } from \"@gull\";\r\nimport { useAuth } from \"app/appContext\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\n\r\nimport Payment from \"./Payment\";\r\nconst WonBids = ({ userId, orders, products }) => {\r\n  const filterOrders = orders.filter((order) => order.userId === userId);\r\n  const [stripePromise, setStripePromise] = useState(null);\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(\r\n      \"http://127.0.0.1:5001/furniturebidding-9a01b/us-central1/app/config\"\r\n    ).then(async (r) => {\r\n      const { publishableKey } = await r.json();\r\n      setStripePromise(loadStripe(publishableKey));\r\n    });\r\n  }, []);\r\n  console.log(stripePromise);\r\n  console.log(clientSecret);\r\n  useEffect(() => {\r\n    fetch(\r\n      \"http://127.0.0.1:5001/furniturebidding-9a01b/us-central1/app/create-payment-intent\",\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({}),\r\n      }\r\n    ).then(async (result) => {\r\n      var { clientSecret } = await result.json();\r\n      setClientSecret(clientSecret);\r\n    });\r\n  }, []);\r\n  return (\r\n    <div className=\"mt-5\">\r\n      <Row>\r\n        {filterOrders.map((order) => (\r\n          <Col lg={12} md={12} sm={12} xs={12}>\r\n            <SimpleCard>\r\n              <div className=\"d-flex flex-row align-items-center\">\r\n                {products.find((product) => product.id === order.productId) && (\r\n                  <img\r\n                    src={\r\n                      products.find((product) => product.id === order.productId)\r\n                        .productImages[0]\r\n                    }\r\n                    style={{ width: \"100px\", height: \"100px\" }}\r\n                  />\r\n                )}\r\n                <div className=\"d-flex flex-column ml-5\">\r\n                  <h3>\r\n                    {products.find(\r\n                      (product) => product.id === order.productId\r\n                    ) &&\r\n                      products.find((product) => product.id === order.productId)\r\n                        .productName}\r\n                  </h3>\r\n                  <p>Amount to pay: &#8369;{order.amountToPay}</p>\r\n                  {/* <button className=\"btn btn-info\">Pay Now</button>\r\n                   */}\r\n                  {order.isPaid ? (\r\n                    \"Paid\"\r\n                  ) : (\r\n                    <Payment\r\n                      stripePromise={stripePromise}\r\n                      clientSecret={clientSecret}\r\n                      orderId={order.id}\r\n                    />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </SimpleCard>\r\n          </Col>\r\n        ))}\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WonBids;\r\n"]},"metadata":{},"sourceType":"module"}